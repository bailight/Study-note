# Lab 1

---

### 1. Протокол HTTP. Структура запросов и ответов, методы запросов, коды ответов сервера, заголовки запросов и ответов.

HTTP 协议。请求和响应结构、请求方法、服务器响应代码、请求和响应标头。

**HTTP**  (HyperText Transfer Protocol) — это протокол прикладного уровня для передачи гипертекстовых документов (например, HTML). Основа обмена данными в Интернете. Работает по схеме «запрос-ответ».

**HTTP**（超文本传输协议）是应用层协议，用于传输超文本文档（如 HTML）。是互联网数据交换的基础，基于 “请求 - 响应” 模式工作。


#### Структура 结构

##### запроса 请求结构

```
// 1. 起始行：方法（GET） + 请求路径（/index.html） + HTTP版本（HTTP/1.1）
GET /index.html HTTP/1.1

// 2. 头部（Headers）：每行格式为 "名称: 值"，描述请求的元信息
Host: example.com          // 目标服务器域名（必填）
User-Agent: Mozilla/5.0    // 客户端浏览器/设备信息
Accept: text/html          // 客户端可接受的响应数据类型
Accept-Language: zh-CN     // 客户端偏好的语言

// 3. 空行：必须存在，用于分隔头部和正文（即使没有正文也要有）
// （此处是空白行）

// 4. 正文（Body）：可选，GET/HEAD 方法通常无正文；POST/PUT 等方法会包含数据
// （此处以 POST 方法为例，正文可能是表单数据或 JSON）
// username=test&password=123456  // 表单数据格式
// {"name":"test","age":20}       // JSON 格式
```

##### ответа 响应结构

```
// 1. 状态行：HTTP版本 + 状态码 + 状态描述(一般不使用)
HTTP/1.1 200 OK

// 2. 头部（Headers）：描述响应的元信息
Content-Type: text/html; charset=UTF-8  // 响应正文的类型和编码
Content-Length: 1280                    // 正文长度（字节数）
Server: Nginx                           // 服务器软件信息
Date: Wed, 13 Sep 2023 08:00:00 GMT     // 响应生成时间

// 3. 空行：必须存在，分隔头部和正文
// （此处是空白行）

// 4. 正文（Body）：服务器返回的实际数据（请求的资源或错误信息）
<!DOCTYPE html>
<html>
  <head>
    <title>示例页面</title>
  </head>
  <body>
    <h1>Hello, World!</h1>  <!-- 这是响应的正文内容 -->
  </body>
</html>
```

也可以传递json，需要在 `Accept` 和 `Content-Type` 修改接收类型。


#### Основные методы запросов 主要请求方法

- `GET`: Запрос данных от сервера. Параметры передаются в URL.
- `HEAD`: 和GET类似，但是响应里没有body
- `POST`: Отправка данных на сервер (форматы, логины). Данные в теле запроса.
- `PUT`: Замена существующих данных на переданные.
- `DELETE`: Удаление указанного ресурса.
- `PATCH`: Частичное обновление ресурса.
- `OPTIONS`: 查询服务器支持的功能，它本身不获取资源，也不修改数据，仅用于 “探测” 服务器的能力。

```
OPTIONS /api/data HTTP/1.1
Host: example.com
```

```
HTTP/1.1 200 OK
Allow: GET, POST, PUT, DELETE  # 服务器支持的方法
Content-Length: 0
```

##### 跨域资源共享（CORS）中的预检请求（Preflight）

当浏览器检测到跨域请求（如前端页面域名与 API 服务器域名不同）且请求满足以下条件时，会自动发送 OPTIONS 预检请求，确认服务器是否允许该跨域请求。

**示例预检请求**

```
OPTIONS /api/data HTTP/1.1
Host: api.example.com
Origin: https://frontend.example.com  # 前端页面的域名（跨域来源）
Access-Control-Request-Method: POST   # 实际要发送的请求方法
Access-Control-Request-Headers: Content-Type  # 实际请求要带的自定义头部
```

**服务器响应（允许跨域）**

```
HTTP/1.1 204 No Content
Access-Control-Allow-Origin: https://frontend.example.com  # 允许的来源
Access-Control-Allow-Methods: POST, GET, OPTIONS  # 允许的方法
Access-Control-Allow-Headers: Content-Type  # 允许的自定义头部
Access-Control-Max-Age: 86400  # 预检结果的缓存时间（秒），避免重复发送
```


#### Коды ответов сервера (категории) 服务器响应码

- 一般由三个数字组成

- 第一个数字：状态组
  - **1xx:** Информационные.
  - **2xx:** Успех (`200 OK`, `201 Created`).
  - **3xx:** Перенаправление (`301 Moved Permanently`永久移动, `304 Not Modified`资源未被修改).
  - **4xx:** Ошибка клиента (`404 Not Found`, `403 Forbidden`无权限, `400 Bad Request`).
  - **5xx:** Ошибка сервера (`500 Internal Server Error`, `502 Bad Gateway`, `507 Insufficient Storage`储存空间不足).


---

### 2. Язык разметки HTML. Особенности, основные теги и атрибуты тегов.

HTML 标记语言。特性、主要标签和标签属性。

**HTML** (HyperText Markup Language) — не язык программирования, а язык разметки для создания структуры веб-страницы.

**HTML**（超文本标记语言）不是编程语言，而是用于创建网页结构的标记语言。

- **Особенности:** Использует теги (угловые скобки `< >` 尖括号). Теги обычно парные (`<открывающий>` и `</закрывающий>`), но бывают и одиночные (например, `<img>`). 标签通常成对出现，但也有单标签。
- **Основные теги:**
  - Структура: `<html>`, `<head>`, `<body>`, `<div>`, `<span>`.
  - Текст: `<h1>...<h6>`, `<p>`, `<br>`, `<strong>`, `<em>`.
  - Ссылки и медиа: `<a href="...">`, `<img src="..." alt="...">`
  - Списки: `<ul>`, `<ol>`, `<li>`.
  - Таблицы: `<table>`, `<tr>`, `<td>`.
- **Атрибуты тегов:** Параметры, расширяющие возможности тега. Указываются в открывающем теге. 扩展标签功能的参数，在开始标签中指定。
  - Пример: `<a href="https://site.com" title="Подсказка">ссылка</a>`. Универсальные атрибуты: `id`, `class`, `style`.
- **Вложеные элементы:**
  ```
  <b>
    TEST
    <i>test</i>
  </b>
  ```

---

### 3. Структура HTML-страницы. Объектная модель документа (DOM).

HTML 页面结构。文档对象模型 (DOM)。

##### Структура страницы 页面结构

```html
<!DOCTYPE html> <!-- 文档类型声明 -->
<html>
  <head>
    <!-- 元信息、标题、外部资源（CSS、JS） -->
    <meta charset="UTF-8">
    <title>页面标题</title>
  </head>
  <body>
    <!-- 用户可见内容 -->
  </body>
</html>
```

#### Объектная модель документа文档对象模型（DOM）

- DOM --- 独立于平台的接口，可使程序和脚本得到修改HTML文件的权限。（HTML/XML 文档的编程接口）
- W3C标准化
- Браузер парсит HTML и создает древовидную структуру объектов — **DOM-дерево**. 节点树
- Каждый тег, атрибут, текст становится **узлом (node)** этого дерева.
- 节点们都是父子关系。
- JavaScript может manipulateровать DOM-деревом: изменять структуру, содержимое, стили, реагировать на события. JavaScript 可操作 DOM 树：修改结构、内容、样式，响应事件。

---

### 4. HTML-формы. Задание метода HTTP-запроса. Правила размещения форм на страницах, виды полей ввода.

HTML 表单。设置 HTTP 请求方法。在页面上放置表单的规则、输入字段的类型。

- **用途：** 收集并向服务器提交用户数据。
- 页面可以拥有很多表单，但同一时间提交的表单只能有一个。
- 嵌套表单是禁止的。
- **主要标签：** <form>。关键属性：
  - action="URL"：数据提交的目标地址。
  - method="GET|POST"：HTTP 请求方法。
- **输入字段（类型）**
    ```html
    <input type="text">：文本框。
    <input type="password">：密码框。
    <input type="checkbox">：复选框。
    <input type="radio">：单选按钮。
    <input type="submit">：提交按钮。
    <select>、<textarea>：下拉列表和多行文本框
    ```
    - 输入字段可以拥有很多属性
- **布局规则：** 表单可放在<body>任意位置。所有输入字段需有name属性（其值会被提交到服务器）。

---

### 5. Каскадные таблицы стилей (CSS). Структура - правила, селекторы. Виды селекторов, особенности их применения. Приоритеты правил. Преимущества CSS перед непосредственным заданием стилей через атрибуты тегов.

层叠样式表 (CSS)。结构 - 规则、选择器。选择器的类型及其应用特性。规则优先级。CSS 相对于直接通过标签属性设置样式的优势。

Язык для описания внешнего вида HTML-документа. 用于描述 HTML 文档外观的语言。

#### Структура правила:

```css
селектор {
    свойство: значение;
    свойство: значение;
}
/* Пример: */
p {
    color: blue;
    font-size: 16px;
}
```

#### 主要选择器

- `*`：通用选择器（所有元素）。Универсальный (все элементы).
- `div`：标签选择器。По тегу.
- `.class`：类选择器。По классу.
- `#id`：ID 选择器。 По идентификатору.
- [attr]：属性选择器。По атрибуту.
- `div p`：嵌套选择器（div内的所有<p>）。Вложенность (все `<p>` внутри `<div>`).
- `div > p`：子选择器（仅直接子元素）。Дочерние (только прямые потомки)
- `a:hover`：伪类（元素状态）。Псевдоклассы (состояние элемента).

##### CSS 伪类（Pseudo-class）

定义元素在特定状态或位置时的样式，它们不直接针对元素本身，而是针对元素的 “动态状态”“位置关系” 或 “特殊身份”。

1. 处理元素的动态状态（用户交互相关）

- `:hover` 鼠标悬停在元素上时
- `:active` 元素被点击（按下未松开）时
- `:focus` 元素获得焦点（如输入框被选中）时
- `:visited` 链接被点击过（已访问）时

2. 选择特定位置的元素（结构相关）

- `:first-child` 父元素的第一个子元素
- `:last-child` 父元素的最后一个子元素
- `:nth-child(n)` 父元素的第 n 个子元素（n 可以是数字、even 偶数、odd 奇数）
- `:only-child：` 父元素中唯一的子元素

3. 处理表单元素的特殊状态

- `:checked` 单选框 / 复选框被选中时
- `:disabled` 元素被禁用（如 disabled 属性的按钮）时
- `:required` 带有 required 属性的表单元素（必填项）
- `:valid/:invalid` 表单元素验证通过 / 不通过时

#### 规则优先级（从高到低）
1. !important（属性值后）。
2. 内联样式（style属性）。
3. ID 选择器。
4. 类、属性、伪类选择器。
5. 标签选择器。
6. 通用选择器。
优先级相同时，后声明的样式生效。

#### 相比style属性的优势：
- 代码与样式分离。
- 可复用：一个 CSS 文件供全站使用。
- 易于维护和修改。
- 缓存：浏览器缓存 CSS 文件，加快页面加载。

---

### 6. LESS, Sass, SCSS. Ключевые особенности, сравнительные характеристики. Совместимость с браузерами, трансляция в "обычный" CSS.

LESS、Sass、SCSS。主要特性、比较特性。与浏览器的兼容性，转换为“常规”CSS。

以上都是CSS预处理器。它们通过变量、嵌套、混合（函数）和逻辑扩展标准 CSS，然后编译为浏览器可识别的普通 CSS。

#### 核心特性

- 变量：Sass/SCSS 用`$primary-color: #333;`，LESS 用`@primary-color: #333;`。
- 嵌套：选择器可嵌套，反映 HTML 结构。
- 混合（Mixins）：可复用的样式块，类似函数。
- 导入：拆分样式到多个文件并导入。
- 数学运算。

#### 对比

Sass和SCSS本质是同一预处理器的两种语法。

Sass 语法更简洁（无花括号和分号）；

SCSS是 CSS 的超集，任何 valid CSS 都是 valid SCSS，已成为事实标准。
LESS功能类似 SCSS，但用@定义变量。

兼容性：完全兼容。最终输出普通 CSS，支持所有理解 CSS 的浏览器。

---

### 7. Клиентские сценарии. Особенности, сферы применения. Язык JavaScript.

客户端脚本。特性、应用领域。JavaScript 语言。

**特点**：代码在客户端（用户浏览器）执行。无法直接访问服务器文件系统或数据库（除非通过 HTTP 请求调用 API）。

- DOM 操作（动画、动态内容修改）。
- 事件处理（点击、悬停、键盘输入）。
- 表单提交前验证。
- 异步请求（AJAX）。
- 操作 Cookies 和 Local Storage。

JavaScript 语言：高级、解释型、多范式（面向对象、函数式）语言，具有动态类型。

---

### 8. Версии ECMAScript, новые возможности ES6 и ES7.

ECMAScript 版本、ES6 和 ES7 的新特性。

ECMAScript 是标准规范，JavaScript 是其最流行的实现。

#### ES6（ES2015）
- let和const：块级作用域变量声明。
- 箭头函数：`() => {}`（简洁语法，绑定this上下文）。
- 类：`class MyClass { constructor() {} }`（原型的语法糖）。
- Promises（承诺）：简化异步操作。
- 模板字符串：`Hello, ${name}!`。
- 解构赋值：`const { prop } = object;` 。
- 默认参数。
- 模块（`import`/`export`）。

#### ES7（ES2016）：

- `Array.prototype.includes()`方法。
- 幂运算操作符`**`。

---

### 9.  Синхронная и асинхронная обработка HTTP-запросов. AJAX.

HTTP 请求的同步和异步处理。AJAX。

同步：浏览器发送请求后阻塞用户界面，等待服务器响应。用户体验差。
异步（AJAX）：浏览器在后台发送请求，不阻塞界面。响应到达后通过回调函数处理，用户可继续操作页面。
AJAX（Asynchronous JavaScript and XML）：创建异步 Web 应用的方案。不依赖数据格式（现在常用 JSON 而非 XML），是现代 Web（SPA）的基础。

---

### 10. Библиотека jQuery. Назначение, основные API. Использование для реализации AJAX и работы с DOM.

jQuery 库。用途、主要 API。用于 AJAX 实现和与 DOM 协作。

> 过去是简化 JS 开发的主流库。抹平浏览器差异，提供简洁 API 处理常见任务。

#### 核心 API

- DOM 操作：$('选择器')选取元素，.html()、.css()、.addClass()、.on('click', ...)。
- AJAX：$.ajax()、$.get()、$.post()。

#### 在 AJAX 和 DOM 中的使用

相比原生 JS（尤其是旧版本），jQuery 极大简化了这些任务。

> 随着现代浏览器和标准（ES6+、Fetch API、document.querySelector）的发展，对 jQuery 的需求已下降。

---

### 11. Реализация AJAX с помощью SuperAgent.

使用 SuperAgent 实现 AJAX。

**SuperAgent** --- легкая и популярная библиотека для AJAX-запросов (альтернатива `fetch` или `$.ajax`). Имеет цепочечный (fluent) API, очень читаемый. SuperAgent是轻量流行的 AJAX 请求库（fetch或$.ajax的替代方案），具有链式（fluent）API，可读性强。


```javascript
// GET请求
superagent
  .get('/api/user')
  .query({ id: 123 }) // 向URL添加参数
  .then(response => {
    // 处理成功响应
    console.log(response.body);
  })
  .catch(error => {
    // 处理错误
    console.error(error);
  });

// POST请求
superagent
  .post('/api/user')
  .send({ name: 'John', email: 'john@example.com' }) // 发送JSON数据
  .set('X-API-Key', 'foobar') // 设置头部
  .then(response => { ... });
  ```

---

### 12. Серверные сценарии. CGI - определение, назначение, ключевые особенности.

服务器端脚本。 CGI - 定义、目的、主要特性。

CGI（Common Gateway Interface，通用网关接口）是标准，定义 Web 服务器（Apache、Nginx 等）与外部程序的交互方式。
用途：允许 Web 服务器通过运行 Perl、Python、C++ 等程序生成动态内容。

**核心特点**

- 对每个请求，Web 服务器都会启动新的CGI 程序进程。
- 通过环境变量和标准输入传递请求数据。
- 从程序的标准输出获取响应，再发送给客户端。

**缺点**：因每个请求都创建进程，开销大，速度慢。

---

### 13. FastCGI - особенности технологии, преимущества и недостатки относительно CGI.

FastCGI - 与 CGI 相比的技术特性、优缺点。

#### 特点

- CGI 的升级版，旨在解决性能问题。
- CGI 程序一次启动后作为长期运行的进程存在。запускается **один раз** и работает как **долгоживущий процесс**.
- Web 服务器通过 socket 或 Unix 套接字与该进程通信。
- 一个进程可处理多个请求。

#### 相比 CGI

优势：

1. 高性能：避免为每个请求启动进程的开销。
2. 可扩展性：更灵活、高效地应对访问量增长（比如用户数增加、请求量飙升）的能力
  - 进程复用，减少资源开销：CGI 每处理一个请求就创建一个新进程，请求结束后进程销毁。当请求量激增时（比如每秒几千次请求），会瞬间创建大量进程，导致服务器 CPU、内存资源被频繁的 “创建 - 销毁” 操作耗尽，无法处理更多请求。FastCGI启动后会创建常驻进程池（多个长期运行的进程），每个进程可以重复处理多个请求。请求到来时，直接从进程池分配空闲进程处理，避免了频繁创建 / 销毁进程的开销。即使请求量增长，也能通过合理配置进程池大小（比如增加进程数量）来应对，而不会因资源耗尽崩溃。
  - 分布式部署支持：FastCGI 进程可以独立运行在不同的服务器节点上（通过网络 socket 与 Web 服务器通信），而 CGI 进程必须与 Web 服务器运行在同一台机器（依赖本地进程创建）。这意味着当单台服务器无法承受负载时，可以通过增加服务器节点、扩展 FastCGI 进程池的分布范围来分担压力（比如用多台服务器运行 FastCGI 进程，统一由前端 Web 服务器分发请求），实现水平扩展。

缺点：

- 架构和配置比纯 CGI 复杂。

---

### 14. FastCGI сервер на языке Java.

Java 中的 FastCGI 服务器。

> 用 Java 编写 FastCGI 服务器是较低级的任务。

1. 创建 Java 应用，启动后监听 Web 服务器（如 Nginx）通过 FastCGI 协议发送的连接。
2. 实现：
   - 需解析 FastCGI 记录（协议格式）。
   - 获取请求数据（参数、头部、正文）。
   - 生成响应（HTTP 头部和正文），按 FastCGI 协议发送回 Web 服务器。